"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1089],{78426:function(a,b,c){c.r(b),c.d(b,{AccountDetailsSection:function(){return A},AccountDetailsSectionLabel:function(){return z},Entry:function(){return f},default:function(){return B}});var d,e,f,g,h,i=c(85893),j=c(10071),k=c(67294),l=c(2886),m=c(26042),n=c(69396),o=c(53698),p=c(70179),q=c(26880),r=c(37581),s=c(3532),t=c(94526),u=c(1864),v=c(4082);(g=d||(d={})).SOCIAL="social",g.EXIT="exit",g.SUCCESS="success",g.HEIGHT="height",g.FAILED="failed",g.SEND_HEIGHT="sendHeight",g.SUCCESS_POST_LOGIN="successPostLogin",g.SUCCESS_POST_SIGNUP="successPostSignup",g.FAILED_POST_LOGIN="failedPostLogin",g.CLOSE_MODAL="closeModal",(h=e||(e={})).LOGIN="login",h.SIGNUP="signup";var w,x=function(a,b,c,f){var g=(0,v.bp)().cookies,h=(0,t.m)(),i=h.useGuidedLayout,j=h.queryParms,w=void 0===j?{}:j;b&&(w.is_iframe_modal=!0);var x=(0,l.RN)(),y=x.consumer,z=x.loading,A=(0,k.useRef)(),B=(0,k.useRef)(null),C=(0,o.Z)(),D=C.isCaviar?r.u.caviar_bff_production:r.u.doordash_identity_web_production,E=(0,k.useState)("500px"),F=E[0],G=E[1],H=y.isGuest,I=(0,p.Z)().setShowSignInSignUpModal,J=(0,k.useCallback)(function(a){var b=window.screen.width/2-225,c=window.screen.height/2-365;A.current&&!A.current.closed?A.current.location.replace(a):A.current=window.open(a,"window","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=".concat(450,",height=").concat(730,",top=").concat(c,", left=").concat(b))},[]),K=(0,k.useCallback)(function(a){if(!/^react-devtools/gi.test(a.data.source)){var b=function(a){if(window.removeEventListener("message",K),A&&A.current){var b;(0,s.ZP)("checkout_social_post_".concat(a,"_success")),null===(b=A.current)||void 0===b||b.close()}else(0,s.ZP)("checkout_post_".concat(a,"_success"));f?window.location.href=f:window.location.reload()};if(a.origin.includes("https://identity.doordash.com")||a.origin.includes("https://www.doordash.com")||a.origin.includes("https://www.trycaviar.com")||a.origin.includes("https://qa.trycaviar.com")||a.origin.includes("https://www.qa.trycaviar.com")||a.origin.includes("https://www.doordashtest.com")||a.origin.includes("https://www.identity-service.doorcrawl.com")||a.origin.includes("https://www.page-service.doordash.com")||a.origin.includes("https://www.page-service-qa.doordash.com")||a.origin.includes("https://page-service-qa.doordash.com")){var h=null==a?void 0:a.data;if(null==h?void 0:h.action)switch(null==h?void 0:h.action){case d.SOCIAL:J(h.socialLink);break;case d.EXIT:null===(i=A.current)||void 0===i||i.close();break;case d.SUCCESS_POST_LOGIN:b(e.LOGIN);break;case d.SUCCESS_POST_SIGNUP:var i,j,k,l,m,n,o,p=new Date;p.setFullYear(p.getFullYear()+1),g.set(u.E.new_user_signup,!0,{expires:p}),b(e.SIGNUP);break;case d.SUCCESS:A&&A.current?((0,s.ZP)("checkout_social_iframe_login_success"),null===(j=A.current)||void 0===j||j.close()):(0,s.ZP)("checkout_iframe_login_success"),I(!1);break;case d.HEIGHT:(0,s.ZP)("checkout_iframe_height"),B.current&&G(h.height+"px");break;case d.SEND_HEIGHT:null===(k=B.current)||void 0===k||null===(l=k.contentWindow)||void 0===l||null===(m=l.postMessage)||void 0===m||m.call(l,{action:"VIEWPORT_HEIGHT",height:window.innerHeight},"*");break;case d.FAILED:(0,s.ZP)("checkout_account_login_failed"),null==A||null===(n=A.current)||void 0===n||n.close();break;case d.CLOSE_MODAL:null==c||c();break;case d.FAILED_POST_LOGIN:(0,s.ZP)("checkout_account_post_login_failed"),(0,s.ZP)("signin_modal_closed"),I(!1),null==A||null===(o=A.current)||void 0===o||o.close(),fetch("https://identity.doordash.com/logout").finally(function(){(0,s.ZP)("checkout_identity_iframe_logout"),window.location.reload()})}}}},[J,I,c,f,g,]),L=(0,q.Zd)({settings:(0,n.Z)((0,m.Z)({},D),{layout:i?"guided_consumer_web_iframe":"identity_web_iframe",scope:"*",prompt:"none",responseType:"code"}),additionalParams:w,enableLastSocial:!1,navigateToSignUp:a,redirectBackAfterLogIn:!0});return{isGuest:H,loading:z,handlePostMessage:K,iframeRef:B,frameUrl:L,iframeHeight:F}},y=c(65999),z=function(){var a=k.useContext(l.Uu).consumer,b=a.email,c=a.isGuest;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Text,{styles:j.Text.Styles.Bold24,style:{width:"100%"},children:y.Z.accountDetailsTitle()}),c?null:(0,i.jsx)(j.Text,{styles:j.Text.Styles.Medium16,style:{display:"flex",alignItems:"center"},children:b})]})};(w=f||(f={})).MODAL="modal",w.NON_MODAL="non_modal";var A=function(a){var b=a.navigateToSignUp,c=a.closeGuidedModal,d=a.entry,e=x(void 0!==b&&b,d===f.MODAL,c),g=e.isGuest,h=e.loading,j=e.handlePostMessage,l=e.iframeRef,m=e.frameUrl,n=e.iframeHeight;return(0,k.useEffect)(function(){return g&&window.addEventListener("message",j),function(){return window.removeEventListener("message",j)}},[g,h]),g&&!h?(0,i.jsx)("iframe",{width:"100%",title:"Login/Signup",src:m,ref:l,height:n,style:{border:"unset",display:"block"}}):null},B=A},17510:function(a,b,c){c.d(b,{AA:function(){return t},LU:function(){return v},Yi:function(){return q},ee:function(){return u},iS:function(){return s},mj:function(){return p},"q$":function(){return r}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  position: relative;\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n            /* The 65% is to support when field labels are not hidden. */\n            bottom: ",";\n          "]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n      position: ",";\n\n      ","\n\n      ","\n    "]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n  padding-left: 0;\n  margin: 0;\n  background-color: ",";\n  border: 1px solid\n    ",";\n  border-radius: ","px;\n  overflow-y: auto;\n  /* Note: temporary styling, need to handle two layers in Popover */\n  z-index: 1000;\n  width: 100%;\n\n  ","\n\n  ","\n"]);return j=function(){return a},a}function k(){var a=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  color: inherit;\n  text-decoration: inherit;\n  min-height: ","px;\n  border-top: 1px solid ",";\n  padding: ","px ","px;\n  background-color: ",";\n\n  &:first-child {\n    border-top: none;\n  }\n\n  &:last-child {\n    position: sticky;\n    bottom: 0;\n    width: 100%;\n  }\n"]);return k=function(){return a},a}function l(){var a=(0,d.Z)([""]);return l=function(){return a},a}function m(){var a=(0,d.Z)(["\n  cursor: pointer;\n"]);return m=function(){return a},a}function n(){var a=(0,d.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"]);return n=function(){return a},a}function o(){var a=(0,d.Z)(["\n  padding: ","px;\n  display: flex;\n  justify-content: flex-end;\n  ","\n\n  picture {\n    display: block;\n    width: ",";\n  }\n"]);return o=function(){return a},a}var p=f.default.div.withConfig({componentId:"sc-7981fc6f-0"})(g()),q=f.default.div.withConfig({componentId:"sc-7981fc6f-1"})(j(),e.Colors.PageBackgroundPrimary,function(a){return a.isNewDesignEnabled?e.Colors.BorderPrimary:e.Colors.BorderSecondary},e.BorderRadius.Small,function(a){return!a.isNewDesignEnabled&&"max-height: ".concat(250,"px;")},function(a){var b=a.isStaticPositionSuggestions,c=a.shouldFlipResults,d=a.isLabelHidden,g=a.isNewDesignEnabled;return(0,f.css)(i(),b?"static":"absolute",c?(0,f.css)(h(),d?"100%":"65%"):"top: 100%;",g&&"\n        border-radius: ".concat(e.BorderRadius.Large,"px;\n        box-shadow: ").concat(e.Shadows.Medium,";\n      "))}),r=(0,f.default)(e.Text).attrs(function(){return{styles:e.Text.Styles.Regular14}}).withConfig({componentId:"sc-7981fc6f-2"})(k(),e.Spacing.XxLarge,e.Colors.BorderSecondary,e.Spacing.XxxSmall,e.Spacing.Medium,function(a){return a.active?e.Colors.PageBackgroundSecondary:e.Colors.PageBackgroundPrimary}),s=f.default.div.withConfig({componentId:"sc-7981fc6f-3"})(l()),t=(0,f.default)(r).withConfig({componentId:"sc-7981fc6f-4"})(m()),u=f.default.div.withConfig({componentId:"sc-7981fc6f-5"})(n(),function(a){return a.hasMarginLeft&&"margin-left: ".concat(e.Spacing.XxSmall,"px;")}),v=f.default.div.withConfig({componentId:"sc-7981fc6f-6"})(o(),e.Spacing.Small,function(a){return a.hasBorderTop&&"border-top: 1px solid ".concat(e.Colors.BorderPrimary,";")},function(a){var b=a.size;return"".concat(b,"px")})},98571:function(a,b,c){var d=c(85893),e=c(1968),f=c(67294),g=c(78426),h=c(94526),i=c(23685),j=c(3532),k=function(a){var b=a.setShowSignInSignUpModal,c=a.onClose,k=a.showSignUpView,l=void 0!==k&&k,m=(0,h.m)().useGuidedLayout,n=(0,f.useState)(!0),o=n[0],p=n[1],q=(0,f.useCallback)(function(){p(!1)},[p]),r=(0,f.useCallback)(function(){(0,j.ZP)("signin_modal_closed"),b(!1),c()},[b,c]);return((0,f.useEffect)(function(){!o&&m&&r()},[o,m,r]),m)?o?(0,d.jsx)(e.Modal,{shouldCloseOnEscapePress:!0,shouldCloseOnOverlayClick:!0,hasContentPadding:!1,hasHeaderPadding:!1,hasCloseButton:!1,shouldRenderStickyHeader:!1,onClose:q,children:(0,d.jsx)(g.default,{navigateToSignUp:l,closeGuidedModal:q,entry:g.Entry.MODAL})}):null:(0,d.jsx)(e.Modal,{hasContentPadding:!1,hasHeaderPadding:!0,hasCloseButton:!0,onClose:r,title:i.default.t("layoutStrings_header_signin_signup"),children:(0,d.jsx)(g.default,{navigateToSignUp:l,entry:g.Entry.MODAL})})};b.Z=k},70179:function(a,b,c){var d=c(10253),e=c(70573),f=c(67294),g=c(47715),h=["www.doordashtest.com"],i=function(){var a=(0,e.useDVSBoolean)(g.PR.showLoginInModal,!1),b=(0,d.Z)(f.useState(!1),2),c=b[0],i=b[1],j=(0,d.Z)(f.useState(!1),2),k=j[0],l=j[1],m=function(){return i(!1)};return h.includes(window.location.host)?{showLoginInModalExpEnabled:!1,showSignInSignUpModal:!1,setShowSignInSignUpModal:i,showSignUpView:k,setShowSignUpView:l,hideSignInSignUpModal:m}:{showLoginInModalExpEnabled:a,showSignInSignUpModal:c,setShowSignInSignUpModal:i,showSignUpView:k,setShowSignUpView:l,hideSignInSignUpModal:m}};b.Z=i},94526:function(a,b,c){c.d(b,{m:function(){return f}});var d=c(70573),e=c(47715),f=function(){return{useGuidedLayout:"treatment"===(0,d.useDVSString)(e.PR.guidedWebLookupLogin,"control")}}}}])