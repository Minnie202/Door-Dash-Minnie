"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3091],{62741:function(a,b,c){c.d(b,{OM:function(){return e},WA:function(){return v},ir:function(){return d},kA:function(){return w}});var d,e,f,g,h=c(14924),i=c(26042),j=c(69396),k=c(99534),l=c(10253),m=c(85893),n=c(67294),o=c(67933),p=c(80008),q=c.n(p),r=c(19128);(f=d||(d={})).Update="CompletedOrderUpdate",(g=e||(e={})).AddRating="AddOrderRating";var s={experience:void 0,consumerTimeZone:q().tz.guess(),consumerFormalNameAbbreviated:"",completedOrders:{},recentOrderRatings:{},dispatch:function(){return null}},t=function(a,b){switch(b.type){case d.Update:var c,f=a.completedOrders,g=(0,k.Z)(a,["completedOrders"]);return(0,j.Z)((0,i.Z)({},g),{completedOrders:(0,j.Z)((0,i.Z)({},f),(0,h.Z)({},b.payload.orderUuid,null!==(c=b.payload.status)&&void 0!==c?c:""))});case e.AddRating:var l,m=a.recentOrderRatings,n=(0,k.Z)(a,["recentOrderRatings"]);return m[b.payload.orderUuid]=null!==(l=b.payload.rating)&&void 0!==l?l:r.xL,(0,j.Z)((0,i.Z)({},n),{recentOrderRatings:m});default:return a}},u=n.createContext(s),v=function(a){var b=a.value,c=a.children,d=(0,l.Z)(n.useReducer(t,(0,j.Z)((0,i.Z)({},b),{completedOrders:{},recentOrderRatings:{},dispatch:function(){return null}})),2),e=d[0],f=d[1];return(0,m.jsx)(u.Provider,{value:(0,j.Z)((0,i.Z)({},e),{dispatch:f}),children:c})},w=function(){var a=n.useContext(u);if(void 0===a&&(0,o.yG)())throw Error("OrdersContext must be used with a OrdersContextProvider");return a}},45046:function(a,b,c){c.d(b,{Z:function(){return aV}});var d=c(10253),e=c(85893),f=c(1968),g=c(67294),h=c(89261),i=c(1864),j=c(10071),k=c(7297),l=c(87379);function m(){var a=(0,k.Z)(["\n  text-decoration: none;\n  cursor: pointer;\n  margin-right: ","px;\n"]);return m=function(){return a},a}function n(){var a=(0,k.Z)(["\n  max-width: ","px;\n"]);return n=function(){return a},a}function o(){var a=(0,k.Z)(["\n  flex-shrink: 0;\n  width: ","px;\n  height: ","px;\n  background-image: url(",");\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  border-radius: ","px;\n"]);return o=function(){return a},a}function p(){var a=(0,k.Z)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  height: ","px;\n  margin-left: ","px;\n"]);return p=function(){return a},a}function q(){var a=(0,k.Z)(["\n  position: absolute;\n  width: 100%;\n  z-index: 1000;\n  top: 0;\n  background-color: white;\n"]);return q=function(){return a},a}var r=l.default.a.withConfig({componentId:"sc-87c1f190-0"})(m(),j.Spacing.XxSmall),s=(0,l.default)(j.Text).attrs(function(){return{styles:j.Text.Styles.Medium14,color:j.Text.Colors.CurrentColor}}).withConfig({componentId:"sc-87c1f190-1"})(n(),4*j.Spacing.XxxLarge),t=l.default.div.withConfig({componentId:"sc-87c1f190-2"})(o(),64,64,function(a){return a.imageUrl},j.BorderRadius.Medium),u=l.default.div.withConfig({componentId:"sc-87c1f190-3"})(p(),64,j.Spacing.XxSmall),v=l.default.div.withConfig({componentId:"sc-87c1f190-4"})(q()),w=c(37835),x=c(80708),y=function(a){var b=a.content,c=a.showGetHelpTooltip,d=a.setShowGetHelpTooltip;return(0,e.jsx)(w.default,{content:(0,e.jsx)(s,{children:b}),position:w.default.Positions.BottomCenter,contentDisplayMode:w.default.ContentDisplayModes.Flex,interactionType:w.default.InteractionTypes.Controlled,isVisible:c,children:function(){return(0,e.jsx)(j.Text,{styles:j.Text.Styles.Medium14,onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:x.Z.getHelpBtn()})}})},z=c(24906),A=c(95899),B=c(31280),C=c(97137),D=c(19128),E=function(a){var b=a.orderUuid,c=a.storeId,d=a.storeName,f=a.showGetHelpTooltip,h=a.setShowGetHelpTooltip,i=a.storeImageUrl,k=a.orderDateDisplay,l=a.showCollapsedHeader,m=a.setShowCollapsedHeader,n=a.onClose,o=a.trackingUseCase,p=g.useCallback(function(a){a[0].isIntersecting?m(!1):l||m(!0)},[m,l]),q=(0,D.S1)(p).containerRef,s=function(a){window.open("https://doordash.com/orders/".concat(a,"/help"))};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Inset,{size:j.Inset.Sizes.XxSmall,children:[(0,e.jsxs)(j.InlineChildren,{justifyContent:j.InlineChildren.Justification.SpaceBetween,alignItems:j.InlineChildren.Alignment.Center,children:[(0,e.jsx)(z.IconButton,{accessibilityLabel:"Close Review Modal",iconType:j.Icon.Types.Close,onClick:function(){n(),(0,C.jY)()}}),(0,e.jsx)(r,{onClick:function(){s(b),(0,C._P)(b,c,o)},children:!l&&(0,e.jsx)(y,{content:x.Z.reviewTooltip(),showGetHelpTooltip:f,setShowGetHelpTooltip:h})})]}),(0,e.jsx)(B.ZP,{subtext:(0,e.jsxs)(u,{children:[(0,e.jsx)("div",{ref:q}),(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold18,children:d}),(0,e.jsx)(j.Text,{styles:j.Text.Styles.Medium14,color:j.Colors.TextSecondary,children:k})]}),secondaryTitleEnd:!!i&&(0,e.jsx)(t,{imageUrl:i}),insetHorizontalSize:j.Inset.Sizes.None,insetVerticalSize:j.Inset.Sizes.XxSmall,titleMaxLines:1,subtextMaxLines:1,isSeparatorVisible:!1,columnGapSize:j.Inset.Sizes.Small})]}),!l&&(0,e.jsx)(A.default,{type:A.default.Types.FullBorder}),l&&(0,e.jsxs)(v,{children:[(0,e.jsx)(j.Inset,{size:j.Inset.Sizes.XxSmall,children:(0,e.jsxs)(j.InlineChildren,{justifyContent:j.InlineChildren.Justification.SpaceBetween,alignItems:j.InlineChildren.Alignment.Center,children:[(0,e.jsxs)(j.InlineChildren,{alignItems:j.InlineChildren.Alignment.Center,children:[(0,e.jsx)(z.IconButton,{accessibilityLabel:"Close Review Modal",iconType:j.Icon.Types.Close,onClick:function(){n(),(0,C.jY)()}}),(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold18,children:d})]}),(0,e.jsx)(r,{onClick:function(){s(b),(0,C._P)(b,c,o)},children:(0,e.jsx)(y,{content:x.Z.reviewTooltip(),showGetHelpTooltip:f,setShowGetHelpTooltip:h})})]})}),(0,e.jsx)(A.default,{type:A.default.Types.FullBorder})]})]})},F=c(62367),G=c(2886),H=c(80008),I=c.n(H),J=c(93999),K=c(44119),L=c.n(K);function M(){var a=(0,k.Z)(["\n  query getConsumerOrderRatingForm($orderUuid: ID!, $submarketId: ID) {\n    getConsumerOrderRatingForm(\n      orderUuid: $orderUuid\n      submarketId: $submarketId\n    ) {\n      result {\n        title\n        subtitle\n        publicReviewsEnabled\n        storeName\n        storeImageUrl\n        tooltip {\n          title\n          text\n        }\n        order {\n          orderUuid\n          storeId\n          orderDateDisplay\n          orderTarget\n          orderedItemList {\n            itemId\n            itemName\n            categoryName\n            price {\n              currency\n              displayString\n              unitAmount\n              symbol\n              sign\n            }\n            image {\n              url\n            }\n          }\n          orderTotalDisplay\n          orderFulfilledAt\n        }\n        targetRatingSectionList {\n          target {\n            targetType\n            targetId\n          }\n          title\n          starRating {\n            title\n            maxNumStars\n            starToTagsList {\n              title\n              starRating\n              tagsTitle\n              tagList {\n                tagName\n                tagId\n              }\n            }\n          }\n          freeText {\n            title\n            exampleText\n          }\n        }\n      }\n      error {\n        errorCode\n        errorMessage\n      }\n    }\n  }\n"]);return M=function(){return a},a}var N=L()(M()),O=c(11890),P=c(38471),Q=c(29815);function R(){var a=(0,k.Z)(["\n  max-width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: ","px;\n"]);return R=function(){return a},a}function S(){var a=(0,k.Z)(["\n  margin-right: ","px;\n  margin-bottom: ","px;\n"]);return S=function(){return a},a}var T=l.default.div.withConfig({componentId:"sc-a8ebbb59-0"})(R(),j.Spacing.Large),U=l.default.div.withConfig({componentId:"sc-a8ebbb59-1"})(S(),j.Spacing.XxSmall,j.Spacing.XxSmall),V=function(a){var b,c,d=a.selectedDasherTags,f=a.setSelectedDasherTags,h=a.tagInfo,i=a.storeId,j=a.orderUuid;if(g.useEffect(function(){null==f||f([])},[f,h]),!(null==h?void 0:h.tagList)||(null==h?void 0:null===(b=h.tagList)||void 0===b?void 0:b.length)<1)return null;var k=function(a){null==f||f(d.filter(function(b){return(null==b?void 0:b.tagName)!==(null==a?void 0:a.tagName)})),(0,C.xD)(i,j)},l=function(a){null==f||f((0,Q.Z)(d).concat([a])),(0,C._N)(i,j)};return(0,e.jsx)(T,{children:h.tagList.map(function(a){return(0,e.jsx)(U,{children:(0,e.jsx)(z.default,{type:z.default.Types.Secondary,size:z.default.Sizes.Small,isToggleable:!0,isToggled:d.some(function(b){return(null==b?void 0:b.tagName)===(null==a?void 0:a.tagName)}),onClick:function(){return d.some(function(b){return(null==b?void 0:b.tagName)===(null==a?void 0:a.tagName)})?k(a):l(a)},children:null==a?void 0:a.tagName})},null!==(c=null==a?void 0:a.tagId)&&void 0!==c?c:void 0)})})},W=c(84518),X=c(44197),Y=function(a){var b,c,d,f,g,h=a.dasherRatingForm,i=a.dasherStarRating,k=a.setDasherStarRating,l=a.selectedDasherTags,m=a.setSelectedDasherTags,n=a.storeId,o=a.orderUuid;return(0,e.jsx)(j.Inset,{horizontalSize:j.Inset.Sizes.Small,verticalSize:j.Inset.Sizes.XxSmall,children:(0,e.jsxs)(j.StackChildren,{size:j.StackChildren.Sizes.XSmall,children:[(0,e.jsxs)(j.StackChildren,{size:j.StackChildren.Sizes.XxxSmall,children:[(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold32,children:h.title}),(0,e.jsx)(j.Text,{styles:j.Text.Styles.Medium16,color:j.Text.Colors.TextSecondary,children:null===(b=h.starRating)||void 0===b?void 0:b.title})]}),(0,e.jsx)(W.Z,{setStarRating:k,starRating:i,starSvg:X.M}),(0,e.jsx)(V,{selectedDasherTags:l,setSelectedDasherTags:m,tagInfo:(c=i)&&null!==(g=null===(d=h.starRating)||void 0===d?void 0:null===(f=d.starToTagsList)||void 0===f?void 0:f[c-1])&&void 0!==g?g:null,storeId:n,orderUuid:o})]})})};function Z(){var a=(0,k.Z)(["\n  border-radius: ","px;\n  background-color: ",";\n"]);return Z=function(){return a},a}function $(){var a=(0,k.Z)(["\n  border-radius: ","px;\n  background-color: ",";\n  ",";\n  width: 100%;\n  text-align: left;\n  font-weight: normal;\n  padding-left: ","px;\n  padding-right: ","px;\n  padding-top: ","px;\n  padding-bottom: ","px;\n"]);return $=function(){return a},a}var _=(0,j.withTheming)(l.default.div.withConfig({componentId:"sc-c6763509-0"})(Z(),j.BorderRadius.Medium,function(a){return a.theme.Colors.BackgroundSecondary})),aa=(0,j.withTheming)(l.default.div.withConfig({componentId:"sc-c6763509-1"})($(),j.BorderRadius.Medium,function(a){var b=a.ratingRequiredError;return function(a){var c=a.theme;return b&&c.Colors.FieldsBackgroundError}},function(a){var b=a.ratingRequiredError;return function(a){var c=a.theme;return b&&"border: 2px solid ".concat(c.Colors.FieldsBorderError,";")}},j.Spacing.Small,j.Spacing.Small,j.Spacing.Large,j.Spacing.Small)),ab=c(24401),ac=c(46018),ad=c(86830),ae=function(a,b,c,d){a&&c===F.cG.RATING_REQUIRED_ERROR&&d(null),b.length>F.lr&&d(F.cG.MAX_CHAR_LENGTH_ERROR),c!==F.cG.RATING_REQUIRED_ERROR&&(b.length>=F.H5&&c===F.cG.MIN_CHAR_LENGTH_ERROR||b.length<=F.lr&&c===F.cG.MAX_CHAR_LENGTH_ERROR||0===b.length)&&d(null)},af=c(91609),ag=c(26042),ah=c(69396),ai=c(74743),aj=c(61225);function ak(){var a=(0,k.Z)(["\n  background-color: ",";\n  border-radius: ","px;\n  padding: ","px ","px ","px\n    ","px;\n"]);return ak=function(){return a},a}function al(){var a=(0,k.Z)(["\n  position: relative;\n  top: ","px;\n"]);return al=function(){return a},a}function am(){var a=(0,k.Z)(["\n  max-width: ","px;\n  white-space: pre-wrap;\n"]);return am=function(){return a},a}var an=l.default.div.withConfig({componentId:"sc-12e9407a-0"})(ak(),j.Colors.SystemGrey5,j.BorderRadius.Small,j.Spacing.XxxxSmall,j.Spacing.XxxSmall,j.Spacing.XxxxSmall,j.Spacing.XxSmall),ao=l.default.div.withConfig({componentId:"sc-12e9407a-1"})(al(),j.Spacing.XxxxSmall),ap=(0,l.default)(j.Text).attrs(function(){return{styles:j.Text.Styles.Medium14,color:j.Text.Colors.CurrentColor}}).withConfig({componentId:"sc-12e9407a-2"})(am(),236),aq=function(a){var b=a.isPublicEnabled,c=a.isPublicDisplay,f=a.setIsPublicDisplay,h=(0,d.Z)(g.useState(!1),2),i=h[0],k=h[1],l=(0,d.Z)(g.useState(!1),2),m=l[0],n=l[1];return(0,e.jsx)(e.Fragment,{children:b?(0,e.jsxs)(j.InlineChildren,{alignItems:j.InlineChildren.Alignment.Center,size:j.InlineChildren.Sizes.XSmall,children:[(0,e.jsx)(w.default,{content:(0,e.jsxs)(ap,{children:[(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold16,color:j.Text.Colors.SystemWhite,children:x.Z.publicReview()}),"".concat(x.Z.customersWillSee(),"\n\n"),(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold16,color:j.Text.Colors.SystemWhite,children:x.Z.privateReview()}),x.Z.onlyTheMerchant()]}),position:w.default.Positions.TopCenter,contentDisplayMode:w.default.ContentDisplayModes.Flex,interactionType:w.default.InteractionTypes.Controlled,isVisible:m,children:function(){return(0,e.jsx)(j.Text,{onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:(0,e.jsx)(ao,{children:(0,e.jsx)(aj.MK,{children:(0,e.jsx)(j.Icon,{size:j.Icon.Sizes.Small,type:j.Icon.Types.InfoLine})})})})}}),(0,e.jsx)(ai.ZP,{isInline:!1,menuContainerStyles:{width:"175px"},interactionType:ai.ZP.InteractionTypes.Controlled,isVisible:i,renderMenuControl:function(a){var b=a.accessibilityAttributes,d=a.describedBy;return(0,e.jsx)(z.default,(0,ah.Z)((0,ag.Z)({"aria-describedby":d,isDepressed:b["aria-expanded"]},b),{onClick:function(){return k(!i)},type:z.default.Types.Tertiary,size:z.default.Sizes.Small,children:(0,e.jsxs)(j.InlineChildren,{size:j.InlineChildren.Sizes.XxSmall,alignItems:j.InlineChildren.Alignment.Center,children:[(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold14,children:c?x.Z.publicReview():x.Z.privateReview()}),(0,e.jsx)(j.Icon,{type:j.Icon.Types[b["aria-expanded"]?"ChevronUp":"ChevronDown"]})]})}))},content:[{title:x.Z.publicReview(),selectType:ai.ZP.SelectTypes.Radio,isSelected:c,onClick:function(){k(!1),f(!0),(0,C.xm)()}},{title:x.Z.privateReview(),selectType:ai.ZP.SelectTypes.Radio,isSelected:!c,onClick:function(){k(!1),f(!1),(0,C.Pk)()}},]})]}):(0,e.jsx)(an,{children:(0,e.jsxs)(j.InlineChildren,{size:j.InlineChildren.Sizes.XxxSmall,alignItems:j.InlineChildren.Alignment.Center,children:[(0,e.jsx)(j.Text,{styles:j.Text.Styles.Medium14,children:x.Z.privateReview()}),(0,e.jsx)(w.default,{content:(0,e.jsx)(ap,{children:x.Z.onlyTheMerchant()}),position:w.default.Positions.BottomCenter,contentDisplayMode:w.default.ContentDisplayModes.Flex,interactionType:w.default.InteractionTypes.Controlled,isVisible:m,children:function(){return(0,e.jsx)(j.Text,{onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:(0,e.jsx)(ao,{children:(0,e.jsx)(j.Icon,{type:j.Icon.Types.InfoLine})})})}})]})})})},ar=function(a){var b=a.starRating,c=a.setStarRating,d=a.ratingsValidationError,f=a.setRatingsValidationError,h=a.orderedItemList,i=a.freeText,k=a.setFreeText,l=a.markedUpText,m=a.setMarkedUpText,n=a.placeholderText,o=a.isPublicEnabled,p=a.isPublicDisplay,q=a.setIsPublicDisplay,r=a.consumerDisplayName,s=a.storeId,t=a.orderUuid,u=(0,ab.ZP)(ab.P$.webAutocomplete);return g.useEffect(function(){ae(b,i,d,f)},[b,i,d,f]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_,{children:[(0,e.jsx)(aa,{ratingRequiredError:d===F.cG.RATING_REQUIRED_ERROR,children:(0,e.jsx)(j.StackChildren,{size:j.StackChildren.Sizes.Medium,children:(0,e.jsx)(W.Z,{starRating:b,setStarRating:c,starSvg:X.M})})}),u?(0,e.jsx)(ac.Z,{orderItemList:null!=h?h:[],onMarkedUpTextChange:m,onTextChange:k,markedUpText:l,plainText:i,placeholderText:n,charLengthError:d===F.cG.MIN_CHAR_LENGTH_ERROR||d===F.cG.MAX_CHAR_LENGTH_ERROR,storeId:s,orderUuid:t}):(0,e.jsx)(ad.Z,{onTextChange:k,fieldText:i,placeholderText:n,charLengthError:d===F.cG.MIN_CHAR_LENGTH_ERROR||d===F.cG.MAX_CHAR_LENGTH_ERROR}),(0,e.jsx)(j.Inset,{children:(0,e.jsxs)(j.InlineChildren,{size:j.InlineChildren.Sizes.XxSmall,alignItems:j.InlineChildren.Alignment.Center,justifyContent:j.InlineChildren.Justification.SpaceBetween,children:[(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold16,children:r}),(0,e.jsx)(aq,{isPublicEnabled:o,isPublicDisplay:p,setIsPublicDisplay:q})]})})]}),(0,e.jsx)(af.Z,{fieldTextLength:i.length,ratingsValidationError:d,isPublicDisplay:p})]})},as=function(a){var b,c,d,e;return"".concat(null!==(d=null===(b=a.starRating)||void 0===b?void 0:b.title)&&void 0!==d?d:""," ").concat(null!==(e=null===(c=a.freeText)||void 0===c?void 0:c.exampleText)&&void 0!==e?e:"")},at=function(a,b,c,d,e){(0,C.lK)(e,d,c,a),b(function(b){var d=new Map(b);return d.set(c,a),d})};function au(){var a=(0,k.Z)(["\n  margin-bottom: ","px;\n  height: ","px;\n"]);return au=function(){return a},a}function av(){var a=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  height: ","px;\n"]);return av=function(){return a},a}function aw(){var a=(0,k.Z)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n"]);return aw=function(){return a},a}function ax(){var a=(0,k.Z)(["\n  height: ","px;\n  width: ","px;\n  img {\n    height: ","px;\n    max-width: ","px;\n    border-radius: ","px;\n    object-fit: cover;\n  }\n"]);return ax=function(){return a},a}var ay=l.default.div.withConfig({componentId:"sc-da7a5723-0"})(au(),j.Spacing.Small,64),az=l.default.div.withConfig({componentId:"sc-da7a5723-1"})(av(),64),aA=(0,l.default)(j.Text).attrs(function(){return{styles:j.Text.Styles.Body1}}).withConfig({componentId:"sc-da7a5723-2"})(aw()),aB=l.default.div.withConfig({componentId:"sc-da7a5723-3"})(ax(),64,64,64,64,j.BorderRadius.Small),aC=c(11459);function aD(){var a=(0,k.Z)(["\n  background-color: ",";\n  border-radius: ","px;\n  padding: ","px ","px ","px\n    ","px;\n  transition: all 0.5s ease;\n  cursor: pointer;\n  &:hover {\n    background-color: ",";\n  }\n"]);return aD=function(){return a},a}var aE=l.default.div.withConfig({componentId:"sc-9615697d-0"})(aD(),function(a){return a.selected?j.Colors.SystemGrey100:j.Colors.SystemGrey5},j.BorderRadius.XLarge,j.Spacing.XSmall,j.Spacing.XSmall,j.Spacing.XxxSmall,j.Spacing.XSmall,function(a){return a.selected?j.Colors.SystemGrey100:j.Colors.SystemGrey20}),aF=function(a){var b=a.selectedItemId,c=a.deleteSetItem,d=a.setItemRatings,f=a.itemRatings,g=f.get(b)===aC.Wc.RATING_VALUE_UPVOTE,h=f.get(b)===aC.Wc.RATING_VALUE_DOWNVOTE;return(0,e.jsxs)(j.InlineChildren,{children:[(0,e.jsx)(aE,{selected:h,onClick:function(){return h?c(b):d(aC.Wc.RATING_VALUE_DOWNVOTE,b)},children:(0,e.jsx)(j.Icon,{color:h?j.Icon.Colors.SystemGrey5:j.Icon.Colors.SystemGrey100,type:j.Icon.Types.ThumbsDownLine})}),(0,e.jsx)(aE,{selected:g,onClick:function(){return g?c(b):d(aC.Wc.RATING_VALUE_UPVOTE,b)},children:(0,e.jsx)(j.Icon,{color:g?j.Icon.Colors.SystemGrey5:j.Icon.Colors.SystemGrey100,type:j.Icon.Types.ThumbsUpLine})})]})},aG=function(a){var b,c=a.orderItemList,d=a.itemRatings,f=a.setItemRatings,g=a.deleteSetItem;return null!==c&&(null==c?void 0:c.length)>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold18,children:x.Z.likeItems()}),c.map(function(a,c){var h,i;return(0,e.jsx)(ay,{children:(0,e.jsx)(B.ZP,{title:(0,e.jsxs)(az,{children:[(0,e.jsx)(aA,{children:null==a?void 0:a.itemName}),(0,e.jsx)(j.Text,{styles:j.Text.Styles.Medium14,color:j.Text.Colors.SystemGrey80,children:null!==(b=null==a?void 0:null===(h=a.price)||void 0===h?void 0:h.displayString)&&void 0!==b?b:""})]}),titleMaxLines:3,isSeparatorVisible:!1,isSquished:!0,secondaryTitleStart:(null==a?void 0:null===(i=a.image)||void 0===i?void 0:i.url)&&(0,e.jsx)(aB,{children:(0,e.jsx)("img",{src:a.image.url?a.image.url:"",alt:"",role:"img","aria-hidden":!0})}),secondaryTitleEnd:(null==a?void 0:a.itemId)&&(0,e.jsx)(aF,{selectedItemId:a.itemId,itemRatings:d,setItemRatings:f,deleteSetItem:g}),secondaryTitleAlignment:B.ZP.Alignment.Center,insetSize:j.Inset.Sizes.None,columnGapSize:j.Inset.Sizes.Small},null==a?void 0:a.itemId)},"".concat(null==a?void 0:a.itemId,"-").concat(c))})]}):(0,e.jsx)(e.Fragment,{})},aH=function(a){var b,c=a.storeRatingForm,d=a.storeStarRating,f=a.setStoreStarRating,g=a.ratingsValidationError,h=a.setRatingsValidationError,i=a.orderedItemList,k=a.freeText,l=a.setFreeText,m=a.markedUpText,n=a.setMarkedUpText,o=a.isPublicEnabled,p=a.isPublicDisplay,q=a.setIsPublicDisplay,r=a.itemRatings,s=a.setItemRatings,t=a.consumerDisplayName,u=a.storeId,v=a.orderUuid;return(0,e.jsx)(j.Inset,{horizontalSize:j.Inset.Sizes.Small,verticalSize:j.Inset.Sizes.XxSmall,children:(0,e.jsxs)(j.StackChildren,{size:j.StackChildren.Sizes.XSmall,children:[(0,e.jsxs)(j.StackChildren,{size:j.StackChildren.Sizes.XxxSmall,children:[(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold32,children:c.title}),(0,e.jsx)(j.Text,{styles:j.Text.Styles.Medium16,color:j.Text.Colors.TextSecondary,children:null===(b=c.starRating)||void 0===b?void 0:b.title})]}),(0,e.jsx)(ar,{starRating:d,setStarRating:f,ratingsValidationError:g,setRatingsValidationError:h,orderedItemList:null!=i?i:null,freeText:k,setFreeText:l,markedUpText:m,setMarkedUpText:n,placeholderText:as(c),isPublicEnabled:o,isPublicDisplay:p,setIsPublicDisplay:q,consumerDisplayName:t,storeId:u,orderUuid:v}),(0,e.jsx)(aG,{orderItemList:i,itemRatings:r,setItemRatings:function(a,b){return at(a,s,b,u,v)},deleteSetItem:function(a){var b,c;return b=a,(c=s)(function(a){var c=new Map(a);return c.delete(b),c})}})]})})},aI=c(33531),aJ=c(53390),aK=c(75521),aL=c(74269),aM=c(50625),aN=c(81407);function aO(){var a=(0,k.Z)(["\n  text-decoration: underline;\n  cursor: pointer;\n  color: ",";\n  font-weight: 600;\n  transition: all 0.5s ease;\n  &:hover {\n    color: ",";\n  }\n"]);return aO=function(){return a},a}var aP=l.default.a.withConfig({componentId:"sc-cf3b5413-0"})(aO(),j.Colors.SystemGrey100,j.Colors.SystemRed50),aQ=c(94394),aR=function(){window.open("https://help.doordash.com/consumers/s/article/Review-Guidelines","_blank"),(0,C.P4)()},aS=c(89477),aT=function(a){var b=a.isPublicReview,c=a.consumerDisplayName,d=a.starRating,f=a.freeText,g=a.markedUpText,h=a.orderedItemList,i=a.storeId,k=a.reviewChainingOrders,l=a.updateRatingFormOrder,m=a.setStarRating;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(j.Inset,{verticalSize:j.Inset.Sizes.None,children:[(0,e.jsx)(j.Stack,{size:j.Stack.Sizes.XSmall,children:(0,e.jsx)(j.Text,{styles:j.Text.Styles.Bold32,children:b?x.Z.thanksForReview():x.Z.thanksForFeedback()})}),b?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.Stack,{size:j.Stack.Sizes.Large,children:(0,e.jsx)(aQ.Z,{consumerDisplayName:c,starRating:d,freeText:f,orderItems:h,markedUpText:g,storeId:i})}),(0,e.jsxs)(j.Text,{styles:j.Text.Styles.Medium16,children:["".concat(x.Z.reviewHasBeenSubmitted()," "),(0,e.jsx)(aP,{onClick:function(){aR()},children:"".concat(x.Z.reviewGuidelinesLink(),".")})," ".concat(x.Z.reviewReceiveEmail())]})]}):(0,e.jsx)(j.Text,{styles:j.Text.Styles.Medium16,children:x.Z.reviewSubmitPrivate()})]}),k&&(null==k?void 0:k.length)>0&&(0,e.jsx)(aS.Z,{orders:k,setOrderUuid:l,setStarRating:m})]})},aU=c(62741),aV=function(a){var b,c,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=a.orderUuid,A=a.consumerDisplayName,B=a.onClose,H=a.setRatingFormOrderUuid,K=a.quietSubmitOnClose,L=a.showDasherRatingSection,M=a.initialStarRating,Q=a.trackingUseCase,R=(0,ab.ZP)(ab.P$.reviewSubmissionTest),S=(0,d.Z)(g.useState(F.Fu.REVIEW_SUBMISSION_MODAL),2),T=S[0],U=S[1],V=(0,d.Z)(g.useState(!1),2),W=V[0],X=V[1],Z=(0,d.Z)(g.useState(!1),2),$=Z[0],_=Z[1],aa=(0,d.Z)(g.useState(null),2),ac=aa[0],ad=aa[1],ae=(0,d.Z)(g.useState(null),2),af=ae[0],ag=ae[1],ah=(0,d.Z)(g.useState(null!=M?M:null),2),ai=ah[0],aj=ah[1],ak=(0,d.Z)(g.useState(""),2),al=ak[0],am=ak[1],an=(0,d.Z)(g.useState(""),2),ao=an[0],ap=an[1],aq=(0,d.Z)(g.useState(null),2),ar=aq[0],as=aq[1],at=(0,d.Z)(g.useState(!0),2),au=at[0],av=at[1],aw=(0,d.Z)(g.useState(new Map),2),ax=aw[0],ay=aw[1],az=(0,d.Z)(g.useState(""),2),aA=az[0],aB=az[1],aC=(0,d.Z)(g.useState(!1),2),aD=aC[0],aE=aC[1];g.useEffect(function(){ac&&ac<4&&_(!0)},[_,ac]),g.useEffect(function(){if($){var a=setTimeout(function(){_(!1)},5e3);return function(){clearTimeout(a)}}},[$,_]);var aF=(0,h.vQ)(i.E.dd_submarket_id)||"",aG=(x=z,y=aF,(0,J.useQuery)(N,{variables:{orderUuid:x,submarketId:y},fetchPolicy:"network-only",skip:null==x})),aO=aG.data,aP=aG.error,aQ=aG.loading,aR=(0,G.RN)().consumer,aS=null!==(q=null===(b=aR.defaultAddress)||void 0===b?void 0:b.timezone)&&void 0!==q?q:I().tz.guess(),aV=(0,aU.kA)(),aW=null==aO?void 0:aO.getConsumerOrderRatingForm.result,aX=null==aW?void 0:aW.order,aY=null!==(r=null==aX?void 0:aX.storeId)&&void 0!==r?r:"",aZ=null!==(s=null==aW?void 0:aW.storeName)&&void 0!==s?s:"",a$=null!==(t=null==aX?void 0:null===(c=aX.orderedItemList)||void 0===c?void 0:null===(k=c[0])||void 0===k?void 0:null===(l=k.image)||void 0===l?void 0:l.url)&&void 0!==t?t:"",a_=(0,F.tt)(null!==(u=null==aX?void 0:aX.orderFulfilledAt)&&void 0!==u?u:"",aS),a0=null==aX?void 0:aX.orderedItemList,a1=(null==aX?void 0:aX.orderTarget)===F.c7.ORDER_TARGET_RESTAURANT&&null!==(v=null==aW?void 0:aW.publicReviewsEnabled)&&void 0!==v&&v,a2=null==aW?void 0:null===(m=aW.targetRatingSectionList)||void 0===m?void 0:m[1],a3=(null==a2?void 0:null===(n=a2.target)||void 0===n?void 0:n.targetType)===F.KG.TARGET_TYPE_DASHER?"delivery":"pickup",a4=null==aW?void 0:null===(o=aW.targetRatingSectionList)||void 0===o?void 0:o[0];g.useEffect(function(){null!=aW&&(0,C.r$)(z,aY,Q)},[aW]);var a5=(0,d.Z)((0,aI.Z)(z,(0,F.FV)(null!=aW?aW:null,ax,ai,al,a1&&au,ao,ac,af),void 0,R,function(){U(F.Fu.REVIEW_SUCCESS_MODAL),(0,C.Io)(null!=aY?aY:"",z,ai,ac,a3,Q),aV.dispatch({type:aU.OM.AddRating,payload:{orderUuid:z,rating:null!=ai?ai:D.xL}}),aB("")}),2),a6=a5[0],a7=a5[1],a8=a7.error,a9=a7.loading,ba=a7.data,bb=function(){K&&T===F.Fu.REVIEW_SUBMISSION_MODAL?(am(""),ap(""),aE(!0)):B()};g.useEffect(function(){aD&&(a6(),B())},[B,aD,a6]);var bc=null!==(w=null===(p=null==ba?void 0:ba.createConsumerRating.reviewChainingOrders)||void 0===p?void 0:p.orderList)&&void 0!==w?w:[],bd=(0,aN.E)().trackErrorAppear;g.useEffect(function(){a8&&!aA&&(bd({origin:"RateAndReviewModal",client_error_id:aL.N.Mutation,error_code:"GRAPHQL_MUTATION_ERROR",error_title:"GraphQLError",component:aM.F.Ratings_Reviews,error_message:aK.Z.errorText.somethingWentWrong(),internal_error_message:aL.D.RatingsSubmissionError,error_type:aL.N.Mutation}),aB(aK.Z.errorText.somethingWentWrong()))},[a8,aB,aA,bd,]);var be=function(a){H(a),am(""),ap(""),ad(null),ag(null),ay(new Map),U(F.Fu.REVIEW_SUBMISSION_MODAL)};return(0,e.jsxs)(f.Modal,{hasContentPadding:!1,hasCloseButton:T===F.Fu.REVIEW_SUCCESS_MODAL,onClose:bb,shouldRenderStickyHeader:!1,primaryAction:{text:(0,F.eu)(T),onClick:function(){return(0,F.MH)(T,ai,al,ar,as,a6,bb)},buttonProps:(0,F.OI)(a9)},renderContentHeader:T!==F.Fu.REVIEW_SUBMISSION_MODAL||aQ?void 0:function(){return(0,e.jsx)(E,{orderUuid:z,storeId:aY,storeName:aZ,showGetHelpTooltip:$,setShowGetHelpTooltip:_,storeImageUrl:a$,orderDateDisplay:a_,showCollapsedHeader:W,setShowCollapsedHeader:X,onClose:bb,trackingUseCase:Q})},renderFooterContent:function(){return(0,e.jsxs)(e.Fragment,{children:[!!aP&&(bd({origin:"RateAndReviewModal",client_error_id:aL.N.Query,error_code:"GRAPHQL_QUERY_ERROR",error_title:"GraphQLError",component:aM.F.Ratings_Reviews,error_message:aK.Z.errorText.somethingWentWrong(),internal_error_message:aL.D.RatingsSubmissionFormQueryError,error_type:aL.N.Query}),(0,e.jsx)(j.Inset,{size:j.Inset.Sizes.Small,children:(0,e.jsx)(aJ.ErrorMessage,{error:aK.Z.errorText.somethingWentWrong()})})),!!aA&&(0,e.jsx)(aJ.ErrorMessage,{error:aA})]})},children:[T===F.Fu.REVIEW_SUBMISSION_MODAL&&(0,e.jsxs)(e.Fragment,{children:[aQ?(0,e.jsx)(P.zw,{children:(0,e.jsx)(O.default,{})}):(0,e.jsx)(j.Inset,{horizontalSize:j.Inset.Sizes.None,verticalSize:j.Inset.Sizes.Small,children:(0,e.jsxs)(j.StackChildren,{size:j.StackChildren.Sizes.Small,children:[L&&!!a2&&(0,e.jsx)(Y,{dasherRatingForm:a2,dasherStarRating:ac,setDasherStarRating:ad,selectedDasherTags:null!=af?af:[],setSelectedDasherTags:ag,storeId:aY,orderUuid:z}),!!a4&&(0,e.jsx)(aH,{storeRatingForm:a4,storeStarRating:ai,setStoreStarRating:aj,ratingsValidationError:ar,setRatingsValidationError:as,orderedItemList:null!=a0?a0:null,freeText:al,setFreeText:am,markedUpText:ao,setMarkedUpText:ap,isPublicEnabled:a1,isPublicDisplay:au,setIsPublicDisplay:av,itemRatings:ax,setItemRatings:ay,consumerDisplayName:A,storeId:aY,orderUuid:z})]})})," "]}),T===F.Fu.REVIEW_SUCCESS_MODAL&&(0,e.jsx)(aT,{isPublicReview:a1&&au&&al.length>0,consumerDisplayName:A,starRating:null!=ai?ai:D.xL,freeText:al,markedUpText:ao,orderedItemList:null!=a0?a0:null,storeId:aY,reviewChainingOrders:bc,updateRatingFormOrder:be,setStarRating:aj})]})}},80708:function(a,b,c){var d=c(23685);b.Z={getHelpBtn:function(){return d.default.t("ratingsStrings_get_help_btn")},reviewTooltip:function(){return d.default.t("ratingsStrings_help_delivery_tooltip")},ratingRequired:function(){return d.default.t("ratingsStrings_rating_required")},minChars10:function(){return d.default.t("ratings_min_chars_10")},maxCharLimit:function(){return d.default.t("ratingsStrings_max_char_limit")},addingMoreDetails:function(){return d.default.t("ratings_adding_more_details")},fellowCustomers:function(){return d.default.t("ratings_fellow_customers")},addingDetailsMerchants:function(){return d.default.t("ratingsStrings_adding_details_merchants")},merchantsAppreciate:function(){return d.default.t("ratingsStrings_merchant_appreciate")},publicReview:function(){return d.default.t("ratingsStrings_public_review")},privateReview:function(){return d.default.t("ratingsStrings_private_review")},customersWillSee:function(){return d.default.t("ratingsStrings_customers_will_see")},onlyTheMerchant:function(){return d.default.t("ratingsStrings_only_the_merchant")},likeItems:function(){return d.default.t("ratingsStrings_like_items")},submitReviewBtn:function(){return d.default.t("ratingsStrings_submit_review_btn")},gotItBtn:function(){return d.default.t("ratingsStrings_got_it_btn")},reviewGuidelinesLink:function(){return d.default.t("ratingsStrings_review_guildelines")},reviewHasBeenSubmitted:function(){return d.default.t("ratingsStrings_review_submitted")},reviewReceiveEmail:function(){return d.default.t("ratingsStrings_receive_email")},reviewSubmitPrivate:function(){return d.default.t("ratingsStrings_review_submitted_private")},thanksForReview:function(){return d.default.t("ratings_thanks_for_review")},thanksForFeedback:function(){return d.default.t("ratingsStrings_thanks_feedback")},reviewMoreStores:function(){return d.default.t("ratingsStrings_review_more_stores")},reviewToday:function(){return d.default.t("ratingsStrings_review_ordered_today")},reviewYesterday:function(){return d.default.t("ratingsStrings_review_ordered_yesterday")},plusOneItem:function(){return d.default.t("ratingsStrings_plus_one_item")},plusItems:function(a){return d.default.t("ratingsStrings_plus_items",{num:a})},pending:function(){return d.default.t("ratingsStrings_pending")},reviewedOn:function(){return d.default.t("ratings_reviewed_on")},leaveAReview:function(){return d.default.t("ratingsStrings_leave_a_review")},ratingsAndReviews:function(){return d.default.t("ratings_ratings_and_reviews")},seeAllReviews:function(){return d.default.t("ratings_see_all_reviews")},oneDayAgo:function(){return d.default.t("ratingsStrings_one_day_ago")},daysAgo:function(a){return d.default.t("ratingsStrings_days_ago",{num:a})},seeMoreReviews:function(){return d.default.t("ratingsStrings_see_more_reviews")},doordashOrder:function(){return d.default.t("ratings_doordash_order")},doordashReview:function(){return d.default.t("ratings_doordash_review")},addReview:function(){return d.default.t("ratingsStrings_add_review")},reviews:function(){return d.default.t("ratingsStrings_reviews")},seeAll:function(){return d.default.t("ratingsStrings_see_all")},beTheFirst:function(){return d.default.t("ratingsStrings_be_the_first")},startYourReview:function(){return d.default.t("ratingsStrings_start_your_review")},readFullMichelin:function(){return d.default.t("ratingsStrings_michelins_full_review")},readFullReview:function(){return d.default.t("ratingsStrings_read_full_review")},viewAllReviews:function(){return d.default.t("ratings_view_all_reviews")},ratingsClose:function(){return d.default.t("stores_close")},sharedWithCustomers:function(){return d.default.t("ratings_panel_shared_with_customers")},submit:function(){return d.default.t("ratings_submit")},whatPeopleAreSaying:function(){return d.default.t("ratings_what_people_are_saying")},beAmongTheFirst:function(){return d.default.t("ratings_be_among_the_first")},customerRelevantExperiences:function(){return d.default.t("ratings_customer_relevant_experiences")},reviewsPubliclyAvailableCustomers:function(){return d.default.t("ratings_reviews_publicly_available_customers")},allReviewsAreChecked:function(){return d.default.t("ratings_all_reviews_are_checked")},whatPublicReviews:function(){return d.default.t("ratings_what_public_reviews")},publicReviews:function(){return d.default.t("ratings_public_reviews")},gotIt:function(){return d.default.t("ratings_got_it")},verifiedOrder:function(){return d.default.t("ratings_verified_order")},liked:function(){return d.default.t("ratings_liked")},disliked:function(){return d.default.t("ratings_disliked")},helpful:function(){return d.default.t("ratingsStrings_helpful")},googleReview:function(){return d.default.t("ratings_google_review")},addAReview:function(){return d.default.t("ratings_panel_add_a_review")},doordash:function(){return d.default.t("ratings_doordash")},google:function(){return d.default.t("ratings_google")}}},61225:function(a,b,c){c.d(b,{DB:function(){return m},Dt:function(){return n},MK:function(){return p},Tm:function(){return o}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  margin-left: 0 !important;\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n  margin-left: ","px !important;\n"]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n"]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: ","px;\n"]);return j=function(){return a},a}function k(){var a=(0,d.Z)(["\n  flex-shrink: 0;\n  width: ","px;\n  height: ","px;\n  background-image: url(",");\n  background-position: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  border-radius: ","px;\n"]);return k=function(){return a},a}function l(){var a=(0,d.Z)(["\n  transform: scale(1.5);\n  transform-origin: center;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n"]);return l=function(){return a},a}(0,f.default)(e.Icon).attrs(function(){return{type:e.Icon.Types.LogoDoordash,size:e.Icon.Sizes.Medium,color:e.Icon.Colors.SystemRed60}}).withConfig({componentId:"sc-1ee5c893-0"})(g()),(0,f.default)(e.Icon).attrs(function(){return{type:e.Icon.Types.LogoGoogle,size:18,useDefaultColors:!0}}).withConfig({componentId:"sc-1ee5c893-1"})(h(),e.Spacing.XxxxSmall);var m=(0,f.default)(e.Text).attrs(function(){return{styles:e.Text.Styles.Medium14,color:e.Text.Colors.SystemGrey60}}).withConfig({componentId:"sc-1ee5c893-2"})(i()),n=f.default.div.withConfig({componentId:"sc-1ee5c893-3"})(j(),e.Spacing.XxxSmall),o=f.default.div.withConfig({componentId:"sc-1ee5c893-4"})(k(),function(a){return a.isModal?50:44},function(a){return a.isModal?50:44},function(a){return a.imageUrl},e.BorderRadius.XLarge),p=f.default.span.withConfig({componentId:"sc-1ee5c893-5"})(l())},444:function(a,b,c){c.d(b,{AH:function(){return j},WF:function(){return i},rv:function(){return k}});var d=c(10253),e=c(3532),f=c(11459),g=c(19128),h={TARGET_TYPE_STORE:1,TARGET_TYPE_ITEM:4},i=function(a,b,c,e,g){var i,j=[];return j.push({target:{targetId:parseInt(e,10),targetType:h.TARGET_TYPE_STORE},starRating:a,reviewText:c,displayStatusNew:f.OB.REVIEW_DISPLAY_STATUS_PUBLIC,markedUpReviewText:g}),j.concat((i=Array.from(b,function(a){var b=(0,d.Z)(a,2),c=b[0],e=b[1];return{itemId:c,itemRating:e}})).map(function(a){return{target:{targetId:a.itemId,targetType:h.TARGET_TYPE_ITEM},ratingInfo:{ratingType:f.IA.RATING_TYPE_VOTE_RATING,ratingValue:a.itemRating}}}))},j=function(){window.open("https://help.doordash.com/consumers/s/article/Review-Guidelines?language=en_US","_blank"),(0,e.ZP)("store_review_click_review_guidelines")},k=function(a,b){return null!=b?"".concat(a," • ").concat((0,g.fI)(b)):a}},19128:function(a,b,c){c.d(b,{C1:function(){return l},GS:function(){return n},Ji:function(){return r},Lf:function(){return v},Ow:function(){return s},S1:function(){return w},c7:function(){return y},fI:function(){return u},j8:function(){return o},lK:function(){return q},mh:function(){return p},q1:function(){return x},tZ:function(){return t},xL:function(){return m}});var d=c(11459);c(444);var e=c(3532),f=c(80008),g=c.n(f),h=c(33574),i=c(23685),j=c(80708),k=c(67294),l={RATING_VALUE_UPVOTE:6,RATING_VALUE_DOWNVOTE:7},m=5,n=4.7,o=5,p=function(a,b){return null==b?void 0:b.find(function(b){return b.orderUuid===a})},q=function(a,b,c,f){f===d.Wc.RATING_VALUE_DOWNVOTE&&(0,e.ZP)("rate_action_select_thumb",{store_id:b,order_uuid:a,item_id:c,response:"down"}),f===d.Wc.RATING_VALUE_UPVOTE&&(0,e.ZP)("rate_action_select_thumb",{store_id:b,order_uuid:a,item_id:c,response:"up"})},r=function(a){return a?(0,h.formatDateTimeFromIsoString)({isoString:a,locale:i.default.getCurrentLocale(),dateOptions:{year:"2-digit",month:h.IntlDateFormatOptions.NUMERIC,day:h.IntlDateFormatOptions.NUMERIC},timeZone:g().tz.guess()}):""},s=function(a){for(var b=new Set,c=0;c<a.length;c++){var d=a[c];null!=d&&null!=d.id&&b.add(d.id)}return b},t=function(a,b,c,d){(0,e.ZP)("card_click",{item_id:a,store_id:b,review_id:c,container:"review_text",page:d})},u=function(a){var b=g()(a),c=g()(),d=c.startOf("day").diff(b.startOf("day"),"days");switch(d){case 0:return j.Z.reviewToday();case 1:return j.Z.reviewYesterday();default:return r(a)}},v=function(a){var b=g()(a),c=g()(),d=c.startOf("day").diff(b.startOf("day"),"days");return 0===d?j.Z.reviewToday():1===d?j.Z.oneDayAgo():d>1&&d<7?j.Z.daysAgo(d):r(a)},w=function(a,b){var c=k.useRef(null),d=k.useRef(),e=k.useMemo(function(){return b},[b,]);return k.useEffect(function(){if(!e)return d.current=new IntersectionObserver(a),c.current&&d.current.observe(c.current),function(){d.current&&d.current.disconnect()}},[c,a,e]),{containerRef:c}},x=function(a){return a>=0&&a<=9?"":a>=10&&a<=499?"".concat(a):a>=500&&a<=999?"".concat((10*Math.floor(a/10)).toLocaleString(),"+"):a>=1e3&&a<=49999?"".concat((100*Math.floor(a/100)).toLocaleString(),"+"):"".concat(5e4.toLocaleString(),"+")},y=function(a){return a.toLowerCase().split(" ").map(function(a){return a.charAt(0).toLocaleUpperCase()+a.slice(1)}).join(" ")}},24112:function(a,b,c){var d=c(29815),e=c(85893);c(67294);var f=c(19128),g=c(97819),h=/<<taggedItemId=(\d+)>>(.+?)<<\/taggedItemId>>/g,i=/<<taggedItemId=\d+>>.+?<<\/taggedItemId>>/g,j=function(a){var b=a.displayText,c=a.itemId,d=a.onItemSelected,h=a.isClickable,i=a.storeId,j=a.reviewId,k=a.trackingUseCase,l=a.taggedItemIds,m=a.textSize;return h&&(null==l?void 0:l.has(c))?(0,e.jsx)(g.LQ,{role:"button",onClick:function(){(0,f.tZ)(c,i,j,k),d(c)},size:m,children:b}):(0,e.jsx)(g.T$,{size:m,role:"button",children:b})},k=function(a){var b=a.displayText,c=a.isReviewCarouselCard,d=a.textSize;return(0,e.jsx)(g.NF,{size:d,isReviewCarouselCard:c,children:b})},l=function(a){var b=a.onItemSelected,c=a.markedUpText,f=a.rawReviewText,l=a.isClickable,m=a.storeId,n=a.reviewId,o=a.trackingUseCase,p=a.taggedItemIds,q=a.isReviewCarouselCard,r=a.maxCharCount,s=a.textSize;if(null==c||0===c.length)return(0,e.jsx)(k,{isReviewCarouselCard:q,displayText:r&&r<f.length?f.substring(0,r).trimEnd()+"…":f,textSize:s});var t=(0,d.Z)(c.matchAll(h));if(0===t.length)return(0,e.jsx)(k,{isReviewCarouselCard:q,displayText:r&&r<f.length?f.substring(0,r).trimEnd()+"…":f,textSize:s});var u=c.split(i);u.length>0&&0===u[0].length&&u.shift();var v=[];if(0===t[0].index){var w=t.shift();null!=w&&v.push((0,e.jsx)(j,{itemId:w[1],displayText:w[2],isClickable:l,onItemSelected:b,storeId:m,reviewId:n,trackingUseCase:o,taggedItemIds:p,textSize:s},w[1]))}for(;t.length>0&&u.length>0;){var x=u.shift();v.push((0,e.jsx)(k,{displayText:x,textSize:s},x));var y=t.shift();null!=y&&v.push((0,e.jsx)(j,{itemId:y[1],displayText:y[2],isClickable:l,onItemSelected:b,storeId:m,reviewId:n,trackingUseCase:o,taggedItemIds:p,textSize:s},y[1]))}for(;t.length>0;){var z=t.shift();null!=z&&v.push((0,e.jsx)(j,{itemId:z[1],displayText:z[2],isClickable:l,onItemSelected:b,storeId:m,reviewId:n,trackingUseCase:o,taggedItemIds:p,textSize:s},z[1]))}for(;u.length>0;){var A=u.shift();v.push((0,e.jsx)(k,{displayText:A,textSize:s},A))}if(r){for(var B=0,C=0;C<v.length;){var D,E,F=null!==(E=null===(D=v[C].props)||void 0===D?void 0:D.displayText)&&void 0!==E?E:"";if(B+F.length<=r)C+=1,B+=F.length;else break}if(C<v.length){var G=(null===(I=v[C])||void 0===I?void 0:I.props.displayText.slice(0,r-B).trimEnd())+"…",H=v.slice(0,C);if(null===(J=v[C])||void 0===J?void 0:J.props.itemId){var I,J,K,L=null===(K=v[C])||void 0===K?void 0:K.props;H.push((0,e.jsx)(j,{itemId:L[1],displayText:G,isClickable:l,onItemSelected:b,storeId:m,reviewId:n,trackingUseCase:o,taggedItemIds:p,textSize:s},"".concat(L[1],"-truncated")))}else H.push((0,e.jsx)(k,{displayText:G,textSize:s},G));return(0,e.jsx)(g.R3,{isReviewCarouselCard:q,children:H})}}return(0,e.jsx)(g.R3,{isReviewCarouselCard:q,children:v})};b.Z=l},97819:function(a,b,c){c.d(b,{LQ:function(){return k},NF:function(){return m},R3:function(){return n},"T$":function(){return l}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  text-decoration: underline;\n  display: inline-block;\n  &:hover {\n    color: ",";\n    cursor: pointer;\n    transition: all 200ms;\n  }\n  ","\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n  display: inline-block;\n  ","\n"]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n  display: contents;\n  ","\n  ","\n"]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n  width: 100%;\n  border: 1px solid transparent;\n  position: relative;\n  overflow-wrap: break-word;\n  box-sizing: border-box;\n  text-align: start;\n  ","\n"]);return j=function(){return a},a}var k=(0,f.default)(e.Text).attrs(function(){return{styles:e.Text.Styles.Bold16}}).withConfig({componentId:"sc-7e7d5e8e-0"})(g(),e.Colors.SystemBlue50,function(a){var b=a.size;return"font-size: ".concat(b,"px;")}),l=(0,f.default)(e.Text).attrs(function(){return{styles:e.Text.Styles.Bold16}}).withConfig({componentId:"sc-7e7d5e8e-1"})(h(),function(a){var b=a.size;return"font-size: ".concat(b,"px;")}),m=(0,f.default)(e.Text).attrs(function(){return{}}).withConfig({componentId:"sc-7e7d5e8e-2"})(i(),function(a){return a.isReviewCarouselCard?"":"white-space: pre-wrap;"},function(a){var b=a.size;return"font-size: ".concat(b,"px;")}),n=f.default.span.withConfig({componentId:"sc-7e7d5e8e-3"})(j(),function(a){return a.isReviewCarouselCard?"":"white-space: pre-wrap;"})}}])