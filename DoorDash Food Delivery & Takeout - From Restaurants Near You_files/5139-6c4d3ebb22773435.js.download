"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5139],{1100:function(a,b,c){c.d(b,{sH:function(){return t}});var d=c(10253),e=c(7297),f=c(85893),g=c(70774),h=c(93999),i=c(43947),j=c(6242),k=c(44119),l=c.n(k);c(67294);var m=c(28606),n=c(2886),o=c(61449);function p(){var a=(0,e.Z)(["\n  mutation addConsumerAddress(\n    $lat: Float!\n    $lng: Float!\n    $city: String!\n    $state: String!\n    $zipCode: String!\n    $printableAddress: String!\n    $shortname: String!\n    $googlePlaceId: String!\n    $subpremise: String\n    $driverInstructions: String\n    $dropoffOptionId: String\n    $manualLat: Float\n    $manualLng: Float\n    $addressLinkType: AddressLinkType\n    $buildingName: String\n    $entryCode: String\n    $personalAddressLabel: PersonalAddressLabelInput\n  ) {\n    addConsumerAddress(\n      lat: $lat\n      lng: $lng\n      city: $city\n      state: $state\n      zipCode: $zipCode\n      printableAddress: $printableAddress\n      shortname: $shortname\n      googlePlaceId: $googlePlaceId\n      subpremise: $subpremise\n      driverInstructions: $driverInstructions\n      dropoffOptionId: $dropoffOptionId\n      manualLat: $manualLat\n      manualLng: $manualLng\n      addressLinkType: $addressLinkType\n      buildingName: $buildingName\n      entryCode: $entryCode\n      personalAddressLabel: $personalAddressLabel\n    ) {\n      ...ConsumerFragment\n    }\n  }\n  ","\n"]);return p=function(){return a},a}var q=l()(p(),n.sy),r=function(){var a=i.Yr({name:m.O.createAddress});return j.Gd().configureScope(function(b){return b.setSpan(a)}),a},s=function(a){return"".concat(a,"/AddAddressMutation")},t=function(a){var b,c=a.addressEntryPoint,e=a.onCompleted,f=a.refetchQueries,g=a.awaitRefetchQueries,i=(0,d.Z)((0,h.useMutation)(q,{onCompleted:function(a){var b,c;null==e||e(null!==(c=null===(b=a.addConsumerAddress)||void 0===b?void 0:b.defaultAddress)&&void 0!==c?c:void 0)}}),2),j=i[0];return{addConsumerAddress:function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=r();return j({awaitRefetchQueries:g,refetchQueries:b?[]:f,variables:a}).then(function(b){var e,f,g=null!==(f=null===(e=b.data)||void 0===e?void 0:e.addConsumerAddress)&&void 0!==f?f:null;d.finish(),o.ts(s(c),a,g)})},res:i[1]}},u=function(a){var b,c=a.addressEntryPoint,d=a.children,e=a.refetchQueries,h=a.awaitRefetchQueries,i=void 0!==h&&h,j=a.onCompleted;return(0,f.jsx)(g.mm,{mutation:q,onCompleted:function(a){var c;return null==j?void 0:j(null!==(b=null===(c=a.addConsumerAddress)||void 0===c?void 0:c.defaultAddress)&&void 0!==b?b:void 0)},children:function(a,b){return d(function(b){var d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f=r();return a({awaitRefetchQueries:i,refetchQueries:d?[]:e,variables:b}).then(function(a){var d,e,g=null!==(e=null===(d=a.data)||void 0===d?void 0:d.addConsumerAddress)&&void 0!==e?e:null;f.finish(),o.ts(s(c),b,g)})},b)}})};b.ZP=u},44221:function(a,b,c){c.d(b,{Z:function(){return q}});var d=c(26042),e=c(67294),f=c(89261),g=c(43947),h=c(47568),i=c(34051),j=c.n(i),k=function(a){return(null==a?void 0:a.state)==="granted"},l=function(a){return(null==a?void 0:a.state)==="denied"},m=function(a){return(null==a?void 0:a.state)==="prompt"},n=function(a){var b,c=a.isServerSide,d=a.permissionName,f=a.onChange,i=a.skip,n=void 0!==i&&i,o=(0,e.useState)(!n),p=o[0],q=o[1],r=(0,e.useState)(null),s=r[0],t=r[1],u=(0,e.useState)(""),v=u[0],w=u[1],x=Boolean(!c&&(null==navigator?void 0:navigator.permissions));return(0,e.useEffect)(function(){var a,b=!1,c=function(a){b||t(a)},e=(a=(0,h.Z)(j().mark(function a(){var e;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return q(!0),a.prev=1,a.next=4,navigator.permissions.query({name:d});case 4:(e=a.sent).onchange=function(){b||(c(this),null==f||f({isGranted:k(this),isDenied:l(this),isPrompt:m(this)}))},b||c(e),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),w(a.t0),g.Tb(Error("[Permissions API] ".concat(a.t0.message)));case 13:return a.prev=13,q(!1),a.finish(13);case 16:case"end":return a.stop()}},a,null,[[1,9,13,16]])})),function(){return a.apply(this,arguments)});return n||(x?e():(q(!1),w("Browser does not support Permissions API"))),function(){b=!0}},[x,d,n,f]),{error:v,isLoading:p,permissionState:null!==(b=null==s?void 0:s.state)&&void 0!==b?b:null,isGranted:k(s),isDenied:l(s),isPrompt:m(s)}},o="ddweb-geolocation-permission",p={enableHighAccuracy:!1,timeout:15e3,maximumAge:0},q=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.overrides,c=a.track,h=a.isServerSide,i=void 0!==h&&h,j=a.usePermissionsApi,k=void 0!==j&&j,l=a.skip,m=void 0!==l&&l,q=(0,d.Z)({},p,b),r=(0,f.XR)(),s=r.get(o),t=(0,e.useCallback)(function(a){a&&(a.isGranted?r.set(o,"true"):a.isDenied?r.set(o,"false"):a.isPrompt&&r.delete(o))},[r]),u=n({isServerSide:i,permissionName:"geolocation",onChange:t,skip:m||!k}),v=u.isGranted,w=u.isPrompt,x=u.isLoading,y=u.error,z=!k||x||y?s:v,A=k&&!x?!w:null!==z,B=(0,e.useState)(null),C=B[0],D=B[1],E=(0,e.useState)(null),F=E[0],G=E[1],H=(0,e.useState)(!m&&k&&A&&z),I=H[0],J=H[1],K=function(a){r.set(o,"true"),null==c||c.success(a),D(a),J(!1)},L=function(a){1===a.code&&(r.set(o,"false"),null==c||c.error(a)),G(a),J(!1),g.Tb(Error("[Geolocation API] ".concat(a.message)))};i||(null==navigator?void 0:navigator.geolocation)||L({message:"Geolocation is not supported"});var M=function(){return J(!0),new Promise(function(a,b){return navigator.geolocation.getCurrentPosition(function(b){K(b),a(b)},function(a){L(a),b(a)},q)})};return{position:C,error:F,loading:I||k&&x,hasAskedForGeolocationPermission:A,updateCurrentPosition:M,grantedGeolocationPermission:!!z}}},61449:function(a,b,c){c.d(b,{AR:function(){return m},"I$":function(){return k},Qh:function(){return h},"X$":function(){return l},hy:function(){return j},ts:function(){return i},un:function(){return n}});var d=c(26042),e=c(69396),f=c(3532),g={userInput:"",trackingData:{},previousDefaultAddressId:""},h=function(a){(0,f.ZP)("debug_address_search_complete",(0,e.Z)((0,d.Z)({},g.trackingData),{address_entry_point:a,search_term:g.userInput}))},i=function(a,b,c){var h,i,j,k=null==c?void 0:c.defaultAddress;(0,f.ZP)("debug_address_create",(0,e.Z)((0,d.Z)({},g.trackingData),{address_entry_point:a,search_term:g.userInput,new_address_dropoff_preference:b.dropoffOptionId,new_address_entry_code:"",new_address_google_place_id:b.googlePlaceId,new_address_instructions:b.driverInstructions,new_address_latitude:null!==(h=b.manualLat)&&void 0!==h?h:b.lat,new_address_longitude:null!==(i=b.manualLng)&&void 0!==i?i:b.lng,new_address_printable_address:b.printableAddress,new_address_subpremise:b.subpremise,saved_address_city:null!==(j=null==k?void 0:k.city)&&void 0!==j?j:"",saved_address_country_code:null==k?void 0:k.countryCode,saved_address_dropoff_preference:null==k?void 0:k.dropoffPreferences.allPreferences.find(function(a){return a.isDefault}),saved_address_geoLocation_lat:null==k?void 0:k.lat,saved_address_geoLocation_lng:null==k?void 0:k.lng,saved_address_id:null==k?void 0:k.id,saved_address_instructions:null==k?void 0:k.driverInstructions,saved_address_manual_latitude:null==k?void 0:k.manualLat,saved_address_manual_longitude:null==k?void 0:k.manualLng,saved_address_printable_address:null==k?void 0:k.printableAddress,saved_address_shortname:null==k?void 0:k.shortname,saved_address_state:null==k?void 0:k.state,saved_address_subpremise:null==k?void 0:k.subpremise,saved_address_zip_code:null==k?void 0:k.zipCode}))},j=function(a,b,c){var d,e,h,i;(0,f.ZP)("debug_address_select",{address_entry_point:a,previous_default_address_id:g.previousDefaultAddressId,selected_address_address_id:b,new_default_address_id:null!==(h=null==c?void 0:null===(d=c.defaultAddress)||void 0===d?void 0:d.id)&&void 0!==h?h:"",cart_id:null!==(i=null==c?void 0:null===(e=c.orderCart)||void 0===e?void 0:e.id)&&void 0!==i?i:""})},k=function(a){g.trackingData=(0,e.Z)((0,d.Z)({},g.trackingData),{GA_geocode_place_id:a.placeId||a.place_id,GA_autocomplete_description:a.description})},l=function(a){var b,c=a.addressTrackingData;g.trackingData=(0,e.Z)((0,d.Z)({},g.trackingData),{GA_Geocode_country_short_name:a.countryCode,GA_Geocode_formatted_address:null!==(b=null==c?void 0:c.formattedAddress)&&void 0!==b?b:"",GA_geocode_geometry_lat:a.lat,GA_geocode_geometry_lng:a.lng,GA_geocode_locality_name:a.city,GA_geocode_long_street_name:a.street,GA_geocode_street_name:a.shortname,GA_geocode_place_id:null==c?void 0:c.googlePlaceId,GA_geocode_zip_code:a.zipCode,GA_autocomplete_formatting_main_text:"",GA_autocomplete_formatting_secondary_text:"",GA_autocomplete_place_id:a.googlePlaceId})},m=function(a){g.previousDefaultAddressId=a},n=function(a){g.userInput=a}}}])